--- a/bin/csh/Makefile
+++ b/bin/csh/Makefile
@@ -6,23 +6,18 @@
 #
 # To profile, put -DPROF in DFLAGS and -pg in COPTS, and recompile.
 
-.include <bsd.own.mk>
 WARNS=6
 
 PROG=	csh
-DFLAGS=-DBUILTIN -DFILEC -DNLS -DSHORT_STRINGS
+DFLAGS=-DEDIT -DBUILTIN -DFILEC -DNLS -DSHORT_STRINGS
 # - Editor history not always aligned with shell history,
 #   should implement internally
 # - Does not handle escaped prompts.
 # - Does not do completion
-.ifndef SMALLPROG
-DFLAGS+=-DEDIT
-.endif
-CPPFLAGS+=-I${.CURDIR} -I. ${DFLAGS}
+CFLAGS+=-Wall -I${PREFIX}/include -L${PREFIX}/lib ${DFLAGS}
 SRCS=	alloc.c char.c const.c csh.c dir.c dol.c err.c exec.c exp.c file.c \
 	func.c glob.c hist.c init.c lex.c misc.c parse.c printf.c proc.c \
 	sem.c set.c str.c time.c
-.PATH:	${NETBSDSRCDIR}/usr.bin/printf
 
 MLINKS=	csh.1 limit.1 csh.1 alias.1 csh.1 bg.1 csh.1 dirs.1 csh.1 fg.1 \
 	csh.1 foreach.1 csh.1 history.1 csh.1 jobs.1 csh.1 popd.1 \
@@ -32,39 +27,32 @@
 DPSRCS+=	errnum.h const.h
 CLEANFILES+=	errnum.h const.h
 
+all:
+	${CC} -o ${PROG} ${CFLAGS} ${SRCS} -lbsd -ledit -landroid-glob
+
+install:
+	install -Dm755 ${PROG} @TERMUX_PREFIX@/bin/${PROG}
+
 errnum.h: err.c
-	${_MKTARGET_CREATE}
-	rm -f ${.TARGET}
+	rm -f $@
 	(\
 	echo '/* Do not edit this file, make creates it. */' ;\
 	echo '#ifndef _h_sh_errnum' ;\
 	echo '#define _h_sh_errnum' ;\
-	egrep 'ERR_' ${.ALLSRC} | egrep '^#define' ;\
+	egrep 'ERR_' ${.CURDIR}*.[ch] | egrep '#define' | sed -e 's/.*#define/#define/' ;\
 	echo '#endif /* _h_sh_errnum */' ;\
-	) > ${.TARGET}
+	) > $@
 
 const.c: errnum.h
 const.h: const.c
-	${_MKTARGET_CREATE}
-	rm -f ${.TARGET}
-	echo '/* Do not edit this file, make creates it. */' > ${.TARGET}
-	${CC} -E ${CPPFLAGS} ${.ALLSRC} | egrep 'Char STR' | \
-	    ${TOOL_SED} -e 's/Char \([a-zA-Z0-9_]*\)\(.*\)/extern Char \1[];/' | \
-	    sort >> ${.TARGET}
+	rm -f $@
+	echo '/* Do not edit this file, make creates it. */' > $@
+	${CC} -E ${CFLAGS} ${.CURDIR}*.[ch] | egrep 'Char STR' | \
+	    sed -e 's/Char \([a-zA-Z0-9_]*\)\(.*\)/extern Char \1[];/' -e 's/.*extern/extern/' | \
+	    sort >> $@
 
 SUBDIR.roff+=USD.doc
 
 COPTS.err.c = -Wno-format-nonliteral
 COPTS.printf.c = -Wno-format-nonliteral
 COPTS.proc.c = -Wno-format-nonliteral
-
-.if !empty(DFLAGS:M*EDIT)
-LDADD+=-ledit -lterminfo -lutil
-DPADD+=${LIBEDIT} ${LIBUTIL}
-.else
-LDADD+=-lutil
-DPADD+=${LIBUTIL}
-.endif
-
-.include <bsd.prog.mk>
-.include <bsd.subdir.mk>
