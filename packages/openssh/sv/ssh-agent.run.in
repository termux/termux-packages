#!@TERMUX_PREFIX@/bin/sh

# Run `sv-enable ssh-agent` and add the following to your bashrc (or
# equivalent) to use ssh-agent:
#   export SSH_AUTH_SOCK="$PREFIX"/var/run/ssh-agent.socket
# After that you can add your key to the agent with `ssh-add`, and
# then make use of the credentials across all terminal sessions

SSH_AUTH_SOCK="${PREFIX}/var/run/ssh-agent.socket"

service_agent() {
	exec ssh-agent -D -a "$1" 2>&1
}

# Allow overriding the service_agent function easily.
if [ -r "${PREFIX}/etc/ssh/start_agent.sh" ]; then
	. "${PREFIX}/etc/ssh/start_agent.sh"
fi

service_agent "${SSH_AUTH_SOCK}"
