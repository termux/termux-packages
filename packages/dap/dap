#!/data/data/com.termux/files/usr/bin/bash

# DAP - Dess Archive Protect
# v2.0 - DESS-STATION OFFICIAL TOOL

set -e

show_menu() {
    clear
    echo -e "\e[1;36m██████   █████  ██████ "
    echo -e "██   ██ ██   ██ ██   ██"
    echo -e "██   ██ ███████ ██████ "
    echo -e "██   ██ ██   ██ ██     "
    echo -e "██████  ██   ██ ██           DESS ARCHIVE PROTECT\e[0m"
    echo "--------------------------------------------------"
    echo " USAGE INSTRUCTIONS:"
    echo "  dap --encrypt <file>       - Inject Binary5 Security"
    echo "  dap --decrypt <file>       - Restore Original Asset"
    echo ""
    echo " ADVANCED (Requires License):"
    echo "  dap --copyright <file>     - Add Digital Signature"
    echo "--------------------------------------------------"
    echo "v2.0 - DESS-STATION OFFICIAL TOOL"
}

# Funções de Criptografia Profissional
encrypt_file() {
    local target=$1
    echo -e "\e[1;34m[*] Injecting Binary5 Security Block...\e[0m"
    openssl enc -aes-256-cbc -salt -in "$target" -out "${target}.dess"
    echo -e "\e[1;32m[✓] Success: ${target}.dess protected.\e[0m"
}

decrypt_file() {
    local target=$1
    echo -e "\e[1;34m[*] Restoring Original Asset...\e[0m"
    openssl enc -aes-256-cbc -d -salt -in "$target" -out "${target%.dess}"
    echo -e "\e[1;32m[✓] Success: Binary restored.\e[0m"
}

# Lógica de Argumentos
if [[ "$1" == "--encrypt" && -n "$2" ]]; then
    encrypt_file "$2"
elif [[ "$1" == "--decrypt" && -n "$2" ]]; then
    decrypt_file "$2"
elif [[ "$1" == "--copyright" ]]; then
    echo -e "\e[1;31m[!] Error: DESS SERVICES License Required.\e[0m"
else
    show_menu
fi
